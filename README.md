# Домашка по модулю 10.1 SkyPro

![SkyPro](https://digital-academy.ru/foto/school/skypro-2.png)

IT-отдел крупного банка делает новую фичу для личного кабинета клиента. Это виджет,
   который показывает несколько последних успешных банковских операций клиента.

**В модуле widget.py можно найти две функции:**
### Модуль `widget.py`
В модуле `widget.py` можно найти две функции:

```
1) "mask_account_card" 
Функция принимает один аргумент — строку, содержащую тип и номер карты или счета,
а возвращает строку с замаскированным номером
1. **`mask_account_card`**
   - Функция принимает один аргумент — строку, содержащую тип и номер карты или счета,  
     а возвращает строку с замаскированным номером.

2. **`get_date`**
   - Функция принимает на вход строку с датой в странном формате  
     и возвращает строку с датой в формате (ДД.ММ.ГГГГ).

### Модуль `processing.py`
В модуле `processing.py` можно найти еще две функции:

1. **`filter_by_state`**
   - Функция принимает список словарей и опционально значение для ключа `state` (по умолчанию `'EXECUTED'`),  
     а возвращает новый список словарей, содержащий только те словари,  
     у которых ключ `state` соответствует указанному значению.

2. **`sort_by_date`**
   - Функция принимает список словарей и необязательный параметр,  
     задающий порядок сортировки (по умолчанию — убывание), а возвращает  
     новый список, отсортированный по дате (`date`).

2) "get_date"
Функция принимает на вход строку с датой в странном формате
и возвращает строку с датой в формате (ДД.ММ.ГГГГ)
Для использования функций достаточно импортировать их в коде и вызвать, задав параметры (см. аннотации).

---

## Инструкция по установке и настройке проекта

### 1. Клонирование репозитория
Склонируйте репозиторий на ваш компьютер:
```bash
git clone https://github.com/Swizerless/SkyPro10_1.git
```
**В модуле processing.py можно найти еще две функции:**
### 2. Установка Poetry
Следуйте [официальным инструкциям](https://python-poetry.org/docs/#installation) или любым другим инструкциям по установке Poetry

### 3. Установка зависимостей
Poetry автоматически создаст виртуальное окружени е и установит все зависимости из файла pyproject.toml. 

Выполните команду:
```bash 
   poetry install
```
1) "filter_by_state"
Функция принимает список словарей и опционально
значение для ключа state (по умолчанию 'EXECUTED'),
а возвращает новый список словарей, содержащий только те словари,
у которых ключ state соответствует указанному значению.

2) "sort_by_date"
Функция принимает список словарей и необязательный параметр,
задающий порядок сортировки (по умолчанию — убывание), а возвращает
новый список, отсортированный по дате (date)

### 4. Активация виртуального окружения
Чтобы активировать виртуальное окружение, созданное Poetry, выполните:
```bash 
   poetry shell
```

Для использования функций - достаточно импортировать их в коде и вызвать, задав параметры (см. аннотации) 
### 5. Дополнительные инструкции
- Если вы хотите добавить новые зависимости, обновите файл pyproject.toml и выполните: 
```bash
   poetry add package_name
```
- Для обновления всех зависимостей выполните:
```bash
   poetry update
```
## Модуль test_masks
Тестируемая функция get_mask_card_number

1. Тестирование правильности маскирования номера карты.
2. Проверка работы функции на различных входных форматах номеров карт, включая граничные случаи и нестандартные длины номеров.
3. Проверка, что функция корректно обрабатывает входные строки, где отсутствует номер карты.
 
Тестируемая функция get_mask_account

1. Тестирование правильности маскирования номера счета.
2. Проверка работы функции с различными форматами и длинами номеров счетов.
3. Проверка, что функция корректно обрабатывает входные данные, где номер счета меньше ожидаемой длины.

## Модуль widget
 
Тестируемая функция mask_account_card

1. Тесты для проверки, что функция корректно распознает и применяет нужный тип маскировки в зависимости от типа входных данных (карта или счет).
2. Параметризованные тесты с разными типами карт и счетов для проверки универсальности функции.
3. Тестирование функции на обработку некорректных входных данных и проверка ее устойчивости к ошибкам.

Тестируемая функция get_date

1. Тестирование правильности преобразования даты.
2. Проверка работы функции на различных входных форматах даты, включая граничные случаи и нестандартные строки с датами.
3. Проверка, что функция корректно обрабатывает входные строки, где отсутствует дата.

## Модуль processing
 
Тестируемая функция filter_by_state

1. Тестирование фильтрации списка словарей по заданному статусу 
2. Проверка работы функции при отсутствии словарей с указанным статусом 
3. Параметризация тестов для различных возможных значений статуса
 
Тестируемая функция sort_by_date

1. Тестирование сортировки списка словарей по датам в порядке убывания и возрастания.
2. Проверка корректности сортировки при одинаковых датах.
3. Тесты на работу функции с некорректными или нестандартными форматами дат.

## Проверка тестами

- Для проверки тестами и общего охвата тестами всех строк кода выполняем команду:
```
pytest --cov=src/tests --cov-report=term-missing
```
Это сформирует отчет с процентом покрытиятестами всего объема кода.
