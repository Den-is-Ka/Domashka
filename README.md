# Домашка по модулю 10.1 SkyPro

![SkyPro](https://digital-academy.ru/foto/school/skypro-2.png)

IT-отдел крупного банка делает новую фичу для личного кабинета клиента. Это виджет,
   который показывает несколько последних успешных банковских операций клиента.

**В модуле widget.py можно найти две функции:**
### Модуль `widget.py`
В модуле `widget.py` можно найти две функции:

```
1) "mask_account_card" 
Функция принимает один аргумент — строку, содержащую тип и номер карты или счета,
а возвращает строку с замаскированным номером
1. **`mask_account_card`**
   - Функция принимает один аргумент — строку, содержащую тип и номер карты или счета,  
     а возвращает строку с замаскированным номером.

2. **`get_date`**
   - Функция принимает на вход строку с датой в странном формате  
     и возвращает строку с датой в формате (ДД.ММ.ГГГГ).

### Модуль `processing.py`
В модуле `processing.py` можно найти еще две функции:

1. **`filter_by_state`**
   - Функция принимает список словарей и опционально значение для ключа `state` (по умолчанию `'EXECUTED'`),  
     а возвращает новый список словарей, содержащий только те словари,  
     у которых ключ `state` соответствует указанному значению.

2. **`sort_by_date`**
   - Функция принимает список словарей и необязательный параметр,  
     задающий порядок сортировки (по умолчанию — убывание), а возвращает  
     новый список, отсортированный по дате (`date`).

2) "get_date"
Функция принимает на вход строку с датой в странном формате
и возвращает строку с датой в формате (ДД.ММ.ГГГГ)
Для использования функций достаточно импортировать их в коде и вызвать, задав параметры (см. аннотации).

---

## Инструкция по установке и настройке проекта

### 1. Клонирование репозитория
Склонируйте репозиторий на ваш компьютер:
```bash
git clone https://github.com/Swizerless/SkyPro10_1.git
```
**В модуле processing.py можно найти еще две функции:**
### 2. Установка Poetry
Следуйте [официальным инструкциям](https://python-poetry.org/docs/#installation) или любым другим инструкциям по установке Poetry

### 3. Установка зависимостей
Poetry автоматически создаст виртуальное окружени е и установит все зависимости из файла pyproject.toml. 

Выполните команду:
```bash 
   poetry install
```
1) "filter_by_state"
Функция принимает список словарей и опционально
значение для ключа state (по умолчанию 'EXECUTED'),
а возвращает новый список словарей, содержащий только те словари,
у которых ключ state соответствует указанному значению.

2) "sort_by_date"
Функция принимает список словарей и необязательный параметр,
задающий порядок сортировки (по умолчанию — убывание), а возвращает
новый список, отсортированный по дате (date)

3) Функция filter_by_currency, принимает на вход список словарей, представляющих транзакции.
Возвращаем итератор, который поочередно выдает транзакции с нужной пользователю валютой.

4) Функция transaction_descriptions создали генератор который принимает список словарей с транзакциями 
и возвращает описание каждой операции по очереди.

5) Генератор card_number_generator, который выдает номера банковских карт в формате XXXX XXXX XXXX XXXX
, где X — цифра номера карты. 
Генератор может сгенерировать номера карт в заданном диапазоне от 0000 0000 0000 0001 до 9999 9999 9999 9999.

6) Создал модуль decorators. Этот модуль будет использоваться для размещения декораторов, включая декоратор 
log.

7) Декоратор log, будет автоматически логировать начало и конец выполнения функции, а также ее результаты или 
возникшие ошибки. Декоратор принимает необязательный аргумент filename, который определяет, куда будут 
записываться логи (в файл или в консоль):

8) Реализовал функцию, которая принимает на вход путь до JSON-файла и возвращает список словарей с данными о 
финансовых транзакциях. Если файл пустой, содержит не список или не найден, функция возвращает пустой список.
Функция находится в модуле utils.py

9) Реализовал функцию, которая принимает на вход транзакцию и возвращает сумму транзакции (amount) в рублях,
c типом данных — float. Если транзакция была в USD или EUR, происходит обращение к внешнему API для получения текущего
курса валют и конвертации суммы операции в рубли.

10) Для конвертации валюты воспользовался Exchange Rates Data API: https://apilayer.com/exchangerates_data-api.
Функцию конвертации поместил в модуль external_api.

11) В модули masks и utils добавлена функция логирования. Запись ведется в папку logs в корне проекта
Лог перезаписывается при каждом запуске.

### 4. Активация виртуального окружения
Чтобы активировать виртуальное окружение, созданное Poetry, выполните:
```bash 
   poetry shell
```

Для использования функций - достаточно импортировать их в коде и вызвать, задав параметры (см. аннотации) 
### 5. Дополнительные инструкции
- Если вы хотите добавить новые зависимости, обновите файл pyproject.toml и выполните: 
```bash
   poetry add package_name
```
- Для обновления всех зависимостей выполните:
```bash
   poetry update
```